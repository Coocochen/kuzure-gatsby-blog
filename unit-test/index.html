<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.c1a2022b56d6f90c3ae4.css" data-identity="gatsby-global-css">:root{--reach-skip-nav:1}[data-reach-skip-nav-link]{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}[data-reach-skip-nav-link]:focus{clip:auto;background:#fff;height:auto;left:10px;padding:1rem;position:fixed;top:10px;width:auto;z-index:1}@font-face{font-family:octicons-link;src:url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format("woff")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;word-wrap:break-word;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:16px;line-height:1.5}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{background-color:#b31d28;color:#fafbfc}.markdown-body .pl-c2{background-color:#d73a49;color:#fafbfc}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{color:#22863a;font-weight:700}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{color:#005cc5;font-weight:700}.markdown-body .pl-mi{color:#24292e;font-style:italic}.markdown-body .pl-mb{color:#24292e;font-weight:700}.markdown-body .pl-md{background-color:#ffeef0;color:#b31d28}.markdown-body .pl-mi1{background-color:#f0fff4;color:#22863a}.markdown-body .pl-mc{background-color:#ffebda;color:#e36209}.markdown-body .pl-mi2{background-color:#005cc5;color:#f6f8fa}.markdown-body .pl-mdr{color:#6f42c1;font-weight:700}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{color:#032f62;text-decoration:underline}.markdown-body .octicon{fill:currentColor;display:inline-block;vertical-align:text-top}.markdown-body a{-webkit-text-decoration-skip:objects;background-color:transparent}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body svg:not(:root){overflow:hidden}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:content-box;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{background:transparent;border-bottom:1px solid #dfe2e5;height:0;margin:15px 0;overflow:hidden}.markdown-body hr:after,.markdown-body hr:before{content:"";display:table}.markdown-body hr:after{clear:both}.markdown-body table{border-collapse:collapse;border-spacing:0}.markdown-body td,.markdown-body th{padding:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-bottom:0;margin-top:0}.markdown-body h1{font-size:32px;font-weight:600}.markdown-body h2{font-size:24px;font-weight:600}.markdown-body h3{font-size:20px;font-weight:600}.markdown-body h4{font-size:16px;font-weight:600}.markdown-body h5{font-size:14px;font-weight:600}.markdown-body h6{font-size:12px;font-weight:600}.markdown-body p{margin-bottom:10px;margin-top:0}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{margin-bottom:0;margin-top:0;padding-left:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.markdown-body pre{font:12px SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;margin-bottom:0;margin-top:0}.markdown-body .octicon{vertical-align:text-bottom}.markdown-body .pl-0{padding-left:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body:after,.markdown-body:before{content:"";display:table}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-bottom:16px;margin-top:0}.markdown-body hr{background-color:#e1e4e8;border:0;height:.25em;margin:24px 0;padding:0}.markdown-body blockquote{border-left:.25em solid #dfe2e5;color:#6a737d;padding:0 1em}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd{border:1px solid #c6cbd1;border-bottom-color:#959da5;box-shadow:inset 0 -1px 0 #959da5;font-size:11px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:600;line-height:1.25;margin-bottom:16px;margin-top:24px}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{border-bottom:1px solid #eaecef;padding-bottom:.3em}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{color:#6a737d;font-size:.85em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-bottom:0;margin-top:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{font-size:1em;font-style:italic;font-weight:600;margin-top:16px;padding:0}.markdown-body dl dd{margin-bottom:16px;padding:0 16px}.markdown-body table{display:block;overflow:auto;width:100%}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:6px 13px}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{background-color:#fff;box-sizing:content-box;max-width:100%}.markdown-body code{background-color:rgba(27,31,35,.05);border-radius:3px;font-size:85%;margin:0;padding:.2em 0}.markdown-body code:after,.markdown-body code:before{content:"\A0";letter-spacing:-.2em}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{background:transparent;border:0;font-size:100%;margin:0;padding:0;white-space:pre;word-break:normal}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{background-color:#f6f8fa;border-radius:3px;font-size:85%;line-height:1.45;overflow:auto;padding:16px}.markdown-body pre code{word-wrap:normal;background-color:transparent;border:0;display:inline;line-height:inherit;margin:0;max-width:auto;overflow:visible;padding:0}.markdown-body pre code:after,.markdown-body pre code:before{content:normal}.markdown-body .full-commit .btn-outline:not(:disabled):hover{border-color:#005cc5;color:#005cc5}.markdown-body kbd{background-color:#fafbfc;border:1px solid #d1d5da;border-bottom-color:#c6cbd1;border-radius:3px;box-shadow:inset 0 -1px 0 #c6cbd1;color:#444d56;display:inline-block;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:10px;padding:3px 5px;vertical-align:middle}.markdown-body :checked+.radio-label{border-color:#0366d6;position:relative;z-index:1}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}.markdown-body hr{border-bottom-color:#eee}.gt-container{font-size:16px}.gt-container,.gt-container *{box-sizing:border-box}.gt-container a{color:#6190e8}.gt-container a:hover{border-color:#81a6ed;color:#81a6ed}.gt-container a.is--active{color:#333;cursor:default!important}.gt-container a.is--active:hover{color:#333}.gt-container .hide{display:none!important}.gt-container .gt-svg{display:inline-block;height:1em;vertical-align:sub;width:1em}.gt-container .gt-svg svg{fill:#6190e8;height:100%;width:100%}.gt-container .gt-ico{display:inline-block}.gt-container .gt-ico-text{margin-left:.3125em}.gt-container .gt-ico-github,.gt-container .gt-ico-github .gt-svg{height:100%;width:100%}.gt-container .gt-ico-github svg{fill:inherit}.gt-container .gt-spinner{position:relative}.gt-container .gt-spinner:before{-webkit-animation:gt-kf-rotate .6s linear infinite;animation:gt-kf-rotate .6s linear infinite;border:1px solid #fff;border-radius:50%;border-top-color:#6190e8;box-sizing:border-box;content:"";height:.75em;margin-left:-.375em;margin-top:-.1875em;position:absolute;top:3px;width:.75em}.gt-container .gt-loader{-webkit-animation:gt-kf-rotate 1.5s ease infinite;animation:gt-kf-rotate 1.5s ease infinite;border:1px solid #999;border-radius:50%;display:inline-block;font-style:normal;height:1.75em;line-height:1.75em;position:relative;width:1.75em}.gt-container .gt-loader:before{background-color:#999;border-radius:50%;content:"";display:block;height:.375em;left:50%;margin-left:-.1875em;margin-top:-.1875em;position:absolute;top:0;width:.375em}.gt-container .gt-avatar{display:inline-block;height:3.125em;width:3.125em}@media (max-width:479px){.gt-container .gt-avatar{height:2em;width:2em}}.gt-container .gt-avatar img{border-radius:3px;height:auto;width:100%}.gt-container .gt-avatar-github{cursor:pointer;height:3em;width:3em}@media (max-width:479px){.gt-container .gt-avatar-github{height:1.875em;width:1.875em}}.gt-container .gt-btn{background-color:#6190e8;border:1px solid #6190e8;border-radius:5px;color:#fff;cursor:pointer;display:inline-block;font-size:.75em;line-height:1;outline:none;padding:.75em 1.25em;text-decoration:none;white-space:nowrap}.gt-container .gt-btn-text{font-weight:400}.gt-container .gt-btn-loading{display:inline-block;height:1em;margin-left:.5em;position:relative;vertical-align:top;width:.75em}.gt-container .gt-btn.is--disable{cursor:not-allowed;opacity:.5}.gt-container .gt-btn-login{margin-right:0}.gt-container .gt-btn-preview{background-color:#fff;color:#6190e8}.gt-container .gt-btn-preview:hover{background-color:#f2f2f2;border-color:#81a6ed}.gt-container .gt-btn-public:hover{background-color:#81a6ed;border-color:#81a6ed}.gt-container .gt-error{color:#ff3860;margin:.625em;text-align:center}.gt-container .gt-initing{padding:1.25em 0;text-align:center}.gt-container .gt-initing-text{font-size:92%;margin:.625em auto}.gt-container .gt-no-init{padding:1.25em 0;text-align:center}.gt-container .gt-link{border-bottom:1px dotted #6190e8}.gt-container .gt-link-counts,.gt-container .gt-link-project{text-decoration:none}.gt-container .gt-meta{border-bottom:1px solid #e9e9e9;font-size:1em;margin:1.25em 0;padding:1em 0;position:relative;z-index:10}.gt-container .gt-meta:after,.gt-container .gt-meta:before{content:" ";display:table}.gt-container .gt-meta:after{clear:both}.gt-container .gt-counts{margin:0 .625em 0 0}.gt-container .gt-user{float:right;font-size:92%;margin:0}.gt-container .gt-user-pic{height:16px;margin-right:.5em;vertical-align:top;width:16px}.gt-container .gt-user-inner{cursor:pointer;display:inline-block}.gt-container .gt-user .gt-ico{margin:0 0 0 .3125em}.gt-container .gt-user .gt-ico svg{fill:inherit}.gt-container .gt-user .is--poping .gt-ico svg{fill:#6190e8}.gt-container .gt-version{color:#a1a1a1;margin-left:.375em}.gt-container .gt-copyright{border-top:1px solid #e9e9e9;margin:0 .9375em .5em;padding-top:.5em}.gt-container .gt-popup{background:#fff;border:1px solid #e9e9e9;display:inline-block;font-size:.875em;letter-spacing:.5px;padding:.625em 0;position:absolute;right:0;top:2.375em}.gt-container .gt-popup .gt-action{cursor:pointer;display:block;margin:.5em 0;padding:0 1.125em;position:relative;text-decoration:none}.gt-container .gt-popup .gt-action.is--active:before{background:#6190e8;content:"";height:.25em;left:.5em;position:absolute;top:.4375em;width:.25em}.gt-container .gt-header{display:flex;position:relative}.gt-container .gt-header-comment{flex:1 1;margin-left:1.25em}@media (max-width:479px){.gt-container .gt-header-comment{margin-left:.875em}}.gt-container .gt-header-textarea{word-wrap:break-word;background-color:#f6f6f6;border:1px solid rgba(0,0,0,.1);border-radius:5px;box-sizing:border-box;display:block;font-size:.875em;max-height:15em;min-height:5.125em;outline:none;padding:.75em;resize:vertical;transition:all .25s ease;width:100%}.gt-container .gt-header-textarea:hover{background-color:#fbfbfb}.gt-container .gt-header-preview{background-color:#f6f6f6;border:1px solid rgba(0,0,0,.1);border-radius:5px;padding:.75em}.gt-container .gt-header-controls{margin:.75em 0 0;position:relative}.gt-container .gt-header-controls:after,.gt-container .gt-header-controls:before{content:" ";display:table}.gt-container .gt-header-controls:after{clear:both}@media (max-width:479px){.gt-container .gt-header-controls{margin:0}}.gt-container .gt-header-controls-tip{color:#6190e8;font-size:.875em;text-decoration:none;vertical-align:sub}@media (max-width:479px){.gt-container .gt-header-controls-tip{display:none}}.gt-container .gt-header-controls .gt-btn{float:right;margin-left:1.25em}@media (max-width:479px){.gt-container .gt-header-controls .gt-btn{float:none;margin:.75em 0 0;width:100%}}.gt-container:after{bottom:100%;content:"";left:0;opacity:0;position:fixed;right:0;top:0}.gt-container.gt-input-focused{position:relative}.gt-container.gt-input-focused:after{background:#000;bottom:0;content:"";left:0;opacity:.6;position:fixed;right:0;top:0;transition:opacity .3s,bottom 0s;z-index:9999}.gt-container.gt-input-focused .gt-header-comment{z-index:10000}.gt-container .gt-comments{padding-top:1.25em}.gt-container .gt-comments-null{text-align:center}.gt-container .gt-comments-controls{margin:1.25em 0;text-align:center}.gt-container .gt-comment{display:flex;padding:.625em 0;position:relative}.gt-container .gt-comment-content{background-color:#f9f9f9;flex:1 1;margin-left:1.25em;overflow:auto;padding:.75em 1em;transition:all .25s ease}.gt-container .gt-comment-content:hover{box-shadow:0 .625em 3.75em 0 #f4f4f4}@media (max-width:479px){.gt-container .gt-comment-content{margin-left:.875em;padding:.625em .75em}}.gt-container .gt-comment-header{font-size:.875em;margin-bottom:.5em;position:relative}.gt-container .gt-comment-block-1{float:right;height:1.375em;width:2em}.gt-container .gt-comment-block-2{float:right;height:1.375em;width:4em}.gt-container .gt-comment-username{color:#6190e8;font-weight:500;text-decoration:none}.gt-container .gt-comment-username:hover{text-decoration:underline}.gt-container .gt-comment-date,.gt-container .gt-comment-text{color:#a1a1a1;margin-left:.5em}.gt-container .gt-comment-edit,.gt-container .gt-comment-like,.gt-container .gt-comment-reply{height:1.375em;position:absolute}.gt-container .gt-comment-edit:hover,.gt-container .gt-comment-like:hover,.gt-container .gt-comment-reply:hover{cursor:pointer}.gt-container .gt-comment-like{right:2em;top:0}.gt-container .gt-comment-edit,.gt-container .gt-comment-reply{right:0;top:0}.gt-container .gt-comment-body{color:#333!important}.gt-container .gt-comment-body .email-hidden-toggle a{background:#dfe2e5;border-radius:1px;color:#444d56;display:inline-block;font-size:12px;font-weight:600;height:12px;line-height:6px;padding:0 9px;text-decoration:none;vertical-align:middle}.gt-container .gt-comment-body .email-hidden-toggle a:hover{background-color:#c6cbd1}.gt-container .gt-comment-body .email-hidden-reply{display:none;white-space:pre-wrap}.gt-container .gt-comment-body .email-hidden-reply .email-signature-reply{border-left:4px solid #dfe2e5;color:#586069;margin:15px 0;padding:0 15px}.gt-container .gt-comment-body .email-hidden-reply.expanded{display:block}.gt-container .gt-comment-admin .gt-comment-content{background-color:#f6f9fe}@-webkit-keyframes gt-kf-rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes gt-kf-rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.icon{fill:currentColor;color:#fff!important;height:1em;margin-right:2px;overflow:hidden;vertical-align:-.15em;width:1em}.github-icon{margin-left:4px}</style><meta name="generator" content="Gatsby 3.8.0"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">jest单元测试、TDD、BDD | Kuzure&#x27;s blog</title><meta data-react-helmet="true" name="description" content="TDD(测试驱动开发) 和 BDD(行为驱动开发) 关于 TDD 和 BDD 网上有各种不同的说法，个人理解的 TDD…"/><meta data-react-helmet="true" property="og:title" content="jest单元测试、TDD、BDD"/><meta data-react-helmet="true" property="og:description" content="TDD(测试驱动开发) 和 BDD(行为驱动开发) 关于 TDD 和 BDD 网上有各种不同的说法，个人理解的 TDD…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:creator" content="kuzure-东山"/><meta data-react-helmet="true" name="twitter:title" content="jest单元测试、TDD、BDD"/><meta data-react-helmet="true" name="twitter:description" content="TDD(测试驱动开发) 和 BDD(行为驱动开发) 关于 TDD 和 BDD 网上有各种不同的说法，个人理解的 TDD…"/><meta data-react-helmet="true" name="og:image" content="https://example.com/static/ff27fa1b94a0eca79482e60faeb433aa/76382/image.jpg"/><meta data-react-helmet="true" name="og:image:alt" content="Laptop on a desk with VS Code open."/><meta data-react-helmet="true" name="twitter:image" content="https://example.com/static/ff27fa1b94a0eca79482e60faeb433aa/76382/image.jpg"/><meta data-react-helmet="true" name="twitter:image:alt" content="Laptop on a desk with VS Code open."/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><link rel="icon" href="/favicon-32x32.png?v=fe79452f2bf834ff9bf8cf2684783a6b" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=fe79452f2bf834ff9bf8cf2684783a6b"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=fe79452f2bf834ff9bf8cf2684783a6b"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=fe79452f2bf834ff9bf8cf2684783a6b"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=fe79452f2bf834ff9bf8cf2684783a6b"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=fe79452f2bf834ff9bf8cf2684783a6b"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=fe79452f2bf834ff9bf8cf2684783a6b"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=fe79452f2bf834ff9bf8cf2684783a6b"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=fe79452f2bf834ff9bf8cf2684783a6b"/><link as="script" rel="preload" href="/webpack-runtime-d9647e5f828b6c867fa4.js"/><link as="script" rel="preload" href="/framework-83c4af4e5826768a26d2.js"/><link as="script" rel="preload" href="/app-6f15860e55dcb5c56d9e.js"/><link as="script" rel="preload" href="/41aca86e-ff3c2ac48cc14a2a06ae.js"/><link as="script" rel="preload" href="/594a10c5e594bd3faaa0b3336dcd5755131ca933-d8a505556d1d6460083f.js"/><link as="script" rel="preload" href="/799b9e28ec84f08939ab3af68c08e0b6efc8bad3-a64b1b520664c8c5c5c8.js"/><link as="script" rel="preload" href="/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-9fb063143ebc60965c12.js"/><link as="fetch" rel="preload" href="/page-data/unit-test/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2744905544.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3090755652.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/764694655.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global h580jr">body{--theme-ui-colors-text:#282c35;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#282c35;--theme-ui-colors-secondary:#1B1F23;--theme-ui-colors-muted:hsla(0, 0%, 0%, 0.2);--theme-ui-colors-highlight:rgba(255, 229, 100, 0.2);--theme-ui-colors-heading:#282c35;--theme-ui-colors-prism-background:#011627;--theme-ui-colors-prism-comment:#809393;--theme-ui-colors-prism-string:#addb67;--theme-ui-colors-prism-var:#d6deeb;--theme-ui-colors-prism-number:#f78c6c;--theme-ui-colors-prism-constant:#82aaff;--theme-ui-colors-prism-punctuation:#c792ea;--theme-ui-colors-prism-className:#ffc98b;--theme-ui-colors-prism-tag:#ffa7c4;--theme-ui-colors-prism-boolean:#ff5874;--theme-ui-colors-prism-property:#80cbc4;--theme-ui-colors-prism-namespace:#b2ccd6;--theme-ui-colors-prism-highlight:hsla(207, 95%, 15%, 1);color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}body.theme-ui-dark{--theme-ui-colors-text:rgba(255, 255, 255, 0.86);--theme-ui-colors-background:#232129;--theme-ui-colors-primary:#D9BAE8;--theme-ui-colors-secondary:rgba(255, 255, 255, 0.86);--theme-ui-colors-muted:hsla(0, 0%, 100%, 0.2);--theme-ui-colors-highlight:#663399;--theme-ui-colors-heading:#fff;}</style><style data-emotion="css-global 8ir1vi">*{box-sizing:border-box;}body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css ocpejr">.css-ocpejr{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;}</style><div class="css-ocpejr"><div><style data-emotion="css 1a2drsk">.css-1a2drsk{height:402px;overflow:hidden;position:fixed!important;top:0;z-index:-1;}</style><div class="css-1a2drsk"><img decoding="async" src="/index-bg.png" alt="background"/><noscript><img decoding="async" src="/index-bg.png" alt="background"/></noscript></div><style data-emotion="css 8531wk">.css-8531wk{padding-bottom:80px;}</style><header class="css-8531wk"><style data-emotion="css 1a161fb">.css-1a161fb{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;}</style><div class="css-1a161fb"><style data-emotion="css fplwad">.css-fplwad{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:32px;}</style><div class="css-fplwad"><style data-emotion="css 84s846">.css-84s846{margin-top:50px;margin-bottom:0;font-size:24px;}</style><style data-emotion="css 12gmd3o">.css-12gmd3o{margin-top:50px;margin-bottom:0;font-size:24px;}</style><h1 class="css-12gmd3o"><style data-emotion="css f4arw">.css-f4arw{color:white;box-shadow:none;-webkit-text-decoration:underline;text-decoration:underline;}.css-f4arw:hover{color:gray;}</style><style data-emotion="css lwud2u">.css-lwud2u{color:var(--theme-ui-colors-primary);color:white;box-shadow:none;-webkit-text-decoration:underline;text-decoration:underline;}.css-lwud2u:hover{color:gray;}</style><a class="css-lwud2u" href="/">Kuzure&#x27;s blog</a></h1></div><style data-emotion="css ve7ya4">.css-ve7ya4{margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion="css tcsn83">.css-tcsn83{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="css-tcsn83"><style data-emotion="css 9cxz3b">.css-9cxz3b{margin-right:8px;margin-bottom:16px;width:80px;min-width:48px;border-radius:50%;cursor:pointer;}.css-9cxz3b:hover{-webkit-transform:rotate(
                666turn
                );-moz-transform:rotate(
                666turn
                );-ms-transform:rotate(
                666turn
                );transform:rotate(
                666turn
                );transition-delay:0;transition-property:all;transition-duration:59s;transition-timing-function:cubic-bezier(.34,0,.84,1);}</style><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-9cxz3b"><div style="max-width:814px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;814&#x27; width=&#x27;814&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/fe79452f2bf834ff9bf8cf2684783a6b/1fe79/avatar.webp 204w,/static/fe79452f2bf834ff9bf8cf2684783a6b/a575b/avatar.webp 407w,/static/fe79452f2bf834ff9bf8cf2684783a6b/695ee/avatar.webp 814w" sizes="(min-width: 814px) 814px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 814px) 814px, 100vw" decoding="async" loading="lazy" data-src="/static/fe79452f2bf834ff9bf8cf2684783a6b/d2713/avatar.jpg" data-srcset="/static/fe79452f2bf834ff9bf8cf2684783a6b/8bfb3/avatar.jpg 204w,/static/fe79452f2bf834ff9bf8cf2684783a6b/a39ba/avatar.jpg 407w,/static/fe79452f2bf834ff9bf8cf2684783a6b/d2713/avatar.jpg 814w" alt="kuzure"/></picture><noscript><picture><source type="image/webp" srcSet="/static/fe79452f2bf834ff9bf8cf2684783a6b/1fe79/avatar.webp 204w,/static/fe79452f2bf834ff9bf8cf2684783a6b/a575b/avatar.webp 407w,/static/fe79452f2bf834ff9bf8cf2684783a6b/695ee/avatar.webp 814w" sizes="(min-width: 814px) 814px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 814px) 814px, 100vw" decoding="async" loading="lazy" src="/static/fe79452f2bf834ff9bf8cf2684783a6b/d2713/avatar.jpg" srcSet="/static/fe79452f2bf834ff9bf8cf2684783a6b/8bfb3/avatar.jpg 204w,/static/fe79452f2bf834ff9bf8cf2684783a6b/a39ba/avatar.jpg 407w,/static/fe79452f2bf834ff9bf8cf2684783a6b/d2713/avatar.jpg 814w" alt="kuzure"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><div class="css-0"><div><div><style data-emotion="css 1arxws0">.css-1arxws0{color:white;font-size:24px;}</style><span class="css-1arxws0">kuzure-耳东山亘</span><style data-emotion="css 1xfcqgg">.css-1xfcqgg{color:var(--theme-ui-colors-primary);}</style><a href="https://github.com/kuzurec" class="css-1xfcqgg"><svg class="icon github-icon" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></a></div><style data-emotion="css 12fs3jb">.css-12fs3jb{color:gray;font-size:13px;margin-top:4px;}</style><div class="css-12fs3jb">东边有座山</div></div></div></div></div></header></div><style data-emotion="css 1n651cb">.css-1n651cb{width:100%;background:white;}</style><div class="css-1n651cb"><style data-emotion="css pf2ntx">.css-pf2ntx{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;padding-bottom:32px;position:relative;}</style><div class="css-pf2ntx"><main><article><style data-emotion="css 183zrzq">@media (max-width: 1366px){.css-183zrzq{margin-top:32px;}}</style><header class="css-183zrzq"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:1380px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;1102&#x27; width=&#x27;1380&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/ff27fa1b94a0eca79482e60faeb433aa/57336/image.webp 345w,/static/ff27fa1b94a0eca79482e60faeb433aa/9f215/image.webp 690w,/static/ff27fa1b94a0eca79482e60faeb433aa/5b434/image.webp 1380w" sizes="(min-width: 1380px) 1380px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1380px) 1380px, 100vw" decoding="async" loading="lazy" data-src="/static/ff27fa1b94a0eca79482e60faeb433aa/76382/image.jpg" data-srcset="/static/ff27fa1b94a0eca79482e60faeb433aa/acfe9/image.jpg 345w,/static/ff27fa1b94a0eca79482e60faeb433aa/ac5b1/image.jpg 690w,/static/ff27fa1b94a0eca79482e60faeb433aa/76382/image.jpg 1380w" alt="Laptop on a desk with VS Code open."/></picture><noscript><picture><source type="image/webp" srcSet="/static/ff27fa1b94a0eca79482e60faeb433aa/57336/image.webp 345w,/static/ff27fa1b94a0eca79482e60faeb433aa/9f215/image.webp 690w,/static/ff27fa1b94a0eca79482e60faeb433aa/5b434/image.webp 1380w" sizes="(min-width: 1380px) 1380px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1380px) 1380px, 100vw" decoding="async" loading="lazy" src="/static/ff27fa1b94a0eca79482e60faeb433aa/76382/image.jpg" srcSet="/static/ff27fa1b94a0eca79482e60faeb433aa/acfe9/image.jpg 345w,/static/ff27fa1b94a0eca79482e60faeb433aa/ac5b1/image.jpg 690w,/static/ff27fa1b94a0eca79482e60faeb433aa/76382/image.jpg 1380w" alt="Laptop on a desk with VS Code open."/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><h1 class="css-0">jest单元测试、TDD、BDD</h1><style data-emotion="css rsra4b">.css-rsra4b{font-size:14px;margin-top:-16px;margin-bottom:16px;}</style><style data-emotion="css 1jnjfic">.css-1jnjfic{font-size:14px;margin-top:-16px;margin-bottom:16px;}.css-1jnjfic code{font-size:inherit;}</style><p class="css-1jnjfic">June 24, 2021</p><span><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg><style data-emotion="css icq0wh">.css-icq0wh{font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:gray;border-radius:12px;margin-right:9px;cursor:pointer;}.css-icq0wh:hover{color:black;border-color:black;}</style><style data-emotion="css akon1l">.css-akon1l{color:var(--theme-ui-colors-primary);font-size:14px;-webkit-text-decoration:none;text-decoration:none;color:gray;border-radius:12px;margin-right:9px;cursor:pointer;}.css-akon1l:hover{color:black;border-color:black;}</style><a class="css-akon1l" href="/#前端">前端</a></span><span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg><a class="css-akon1l" href="/#单元测试">单元测试</a></span></span></header><section><style data-emotion="css 17gfwuz">.css-17gfwuz{pointer-events:painted;}.css-17gfwuz a{visibility:hidden;}.css-17gfwuz:hover a{visibility:visible;}</style><h3 id="tdd测试驱动开发-和-bdd行为驱动开发" class="css-17gfwuz"><style data-emotion="css yixlj4">.css-yixlj4{margin-left:-20px;padding-right:4px;color:var(--theme-ui-colors-primary);}</style><a href="#tdd测试驱动开发-和-bdd行为驱动开发" aria-label="TDD(测试驱动开发) 和 BDD(行为驱动开发)" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TDD(测试驱动开发) 和 BDD(行为驱动开发)</h3><style data-emotion="css 1ek8oqb">.css-1ek8oqb code{font-size:inherit;}</style><p class="css-1ek8oqb">关于 TDD 和 BDD 网上有各种不同的说法，个人理解的 TDD，就是首先明确自己想要写什么代码，尽量从最简单的开始，写一个测试，再去具体地实现这小段代码，以达到这个测试通过的效果，之后再继续写测试、实现、测试通过，这样不停循环重构。</p><p class="css-1ek8oqb">例如写一个函数，我们可以首先写函数的调用的测试，然后实现代码并测试成功后，再测试函数的返回值，再继续实现函数…</p><p class="css-1ek8oqb">TDD 的好处就是会减少程序逻辑的错误，尽可能地减少 bug。而缺点就是如果更改了代码的实现逻辑，就需要修改测试，可能会使得测试代码难以维护。</p><p class="css-1ek8oqb">BDD 是 TDD 的一种补充，在 TDD 的基础上，采用了更详细的功能描述，通过考虑用户的行为、组件的功能，来编写测试。</p><p class="css-1ek8oqb">考虑到项目的复杂度和依赖性，TDD 需要简单和易于测试的代码，否则需要开发人员花较多的时间进行一些桥接的工作。因此个人比较推荐 BDD 的测试模式，通过功能和行为的描述，即行为/条件…结果…，进行测试。</p><p class="css-1ek8oqb">但是具体的模式可以根据实际开发工作进行选择。</p><p class="css-1ek8oqb">TDD 和 BDD 的比较可以参考: <a href="https://segmentfault.com/a/1190000018512127?utm_source=tag-newest" class="css-1xfcqgg">关于 TDD 和 BDD</a></p><h3 id="编写-react-组件的单元测试" class="css-17gfwuz"><a href="#编写-react-组件的单元测试" aria-label="编写 react 组件的单元测试" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>编写 react 组件的单元测试</h3><p class="css-1ek8oqb">单元测试工具采用 <style data-emotion="css 118aluo">.css-118aluo{border-radius:0.3em;color:var(--theme-ui-colors-secondary);background-color:var(--theme-ui-colors-highlight);padding-top:0.15em;padding-bottom:0.05em;padding-left:0.2em;padding-right:0.2em;}</style><code class="css-118aluo">jest</code>, 官方介绍，jest 是一款开箱即用的测试框架，相比其它的测试工具，更简洁明快。</p><p class="css-1ek8oqb">组件测试的步骤大致如下：</p><h4 id="1）测试组件的分支渲染" class="css-17gfwuz"><a href="#1）测试组件的分支渲染" aria-label="1）测试组件的分支渲染" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1）测试组件的分支渲染</h4><style data-emotion="css rczgmi">.css-rczgmi{font-family:Menlo,monospace;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;margin-bottom:8px;color:white;background-color:var(--theme-ui-colors-prism-background);overflow:auto;border-radius:10px;padding:16px;}.css-rczgmi .attr-name{font-style:italic;}.css-rczgmi .comment{color:var(--theme-ui-colors-prism-comment);}.css-rczgmi .attr-name,.css-rczgmi .string,.css-rczgmi .url{color:var(--theme-ui-colors-prism-string);}.css-rczgmi .variable{color:var(--theme-ui-colors-prism-var);}.css-rczgmi .number{color:var(--theme-ui-colors-prism-number);}.css-rczgmi .builtin,.css-rczgmi .char,.css-rczgmi .constant,.css-rczgmi .function{color:var(--theme-ui-colors-prism-constant);}.css-rczgmi .punctuation,.css-rczgmi .selector,.css-rczgmi .doctype{color:var(--theme-ui-colors-prism-punctuation);}.css-rczgmi .class-name{color:var(--theme-ui-colors-prism-className);}.css-rczgmi .tag,.css-rczgmi .operator,.css-rczgmi .keyword{color:var(--theme-ui-colors-prism-tag);}.css-rczgmi .boolean{color:var(--theme-ui-colors-prism-boolean);}.css-rczgmi .property{color:var(--theme-ui-colors-prism-property);}.css-rczgmi .namespace{color:var(--theme-ui-colors-prism-namespace);}.css-rczgmi .highlight{background:hsla(0, 0%, 40%, .5);}</style><style data-emotion="css 1q7q4hh">.css-1q7q4hh{font-family:Menlo,monospace;font-size:inherit;}</style><style data-emotion="css 1wbk7c2">.css-1wbk7c2{font-family:Menlo,monospace;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;margin-bottom:8px;color:white;background-color:var(--theme-ui-colors-prism-background);overflow:auto;border-radius:10px;padding:16px;font-family:Menlo,monospace;font-size:inherit;}.css-1wbk7c2 .attr-name{font-style:italic;}.css-1wbk7c2 .comment{color:var(--theme-ui-colors-prism-comment);}.css-1wbk7c2 .attr-name,.css-1wbk7c2 .string,.css-1wbk7c2 .url{color:var(--theme-ui-colors-prism-string);}.css-1wbk7c2 .variable{color:var(--theme-ui-colors-prism-var);}.css-1wbk7c2 .number{color:var(--theme-ui-colors-prism-number);}.css-1wbk7c2 .builtin,.css-1wbk7c2 .char,.css-1wbk7c2 .constant,.css-1wbk7c2 .function{color:var(--theme-ui-colors-prism-constant);}.css-1wbk7c2 .punctuation,.css-1wbk7c2 .selector,.css-1wbk7c2 .doctype{color:var(--theme-ui-colors-prism-punctuation);}.css-1wbk7c2 .class-name{color:var(--theme-ui-colors-prism-className);}.css-1wbk7c2 .tag,.css-1wbk7c2 .operator,.css-1wbk7c2 .keyword{color:var(--theme-ui-colors-prism-tag);}.css-1wbk7c2 .boolean{color:var(--theme-ui-colors-prism-boolean);}.css-1wbk7c2 .property{color:var(--theme-ui-colors-prism-property);}.css-1wbk7c2 .namespace{color:var(--theme-ui-colors-prism-namespace);}.css-1wbk7c2 .highlight{background:hsla(0, 0%, 40%, .5);}</style><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;测试 CustomPicker组件&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;默认状态下只渲染样板不渲染取色板&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> wrapper </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token maybe-class-name">CustomPicker</span><span class="token plain"> color</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;3b71fb&quot;</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><style data-emotion="css 13aqjzy">.css-13aqjzy{display:inline-block;}</style><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token plain">wrapper</span><span class="token punctuation">.</span><span class="token method function property-access">exists</span><span class="token punctuation">(</span><span class="token string">&quot;.swatch-wrapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token plain">wrapper</span><span class="token punctuation">.</span><span class="token method function property-access">exists</span><span class="token punctuation">(</span><span class="token string">&quot;popover-wrapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;点击样板后取色板成功渲染&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> wrapper </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token maybe-class-name">CustomPicker</span><span class="token plain"> color</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;3b71fb&quot;</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">    wrapper</span><span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token string">&quot;.swatch-wrapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">simulate</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token plain">wrapper</span><span class="token punctuation">.</span><span class="token method function property-access">exists</span><span class="token punctuation">(</span><span class="token string">&quot;popover-wrapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div></pre><p class="css-1ek8oqb">describe 会形成一个作用域，对于其包含的测试需全部执行成功，才算测试成功。</p><p class="css-1ek8oqb">每一个 it 形成一个单独的测试作用域，第一个参数为这个测试的断言，第二个回调函数中编写具体的测试。</p><p class="css-1ek8oqb">测试 react 组件需要用到 enzyme 的 mount(全渲染)/shallow(浅渲染)/render(静态渲染)方法，来渲染组件，获取组件的 dom 结构。</p><p class="css-1ek8oqb">获取到组件的 dom 结构之后，就可以对组件的渲染进行测试。</p><p class="css-1ek8oqb">使用 simulate 可以模拟交互事件的触发。</p><p class="css-1ek8oqb">在交互事件或者组件生命周期调用之后，可以使用 expect 语句测试是否结果达到预期。</p><p class="css-1ek8oqb">expect 代表期望，用于描述测试的期望结果。比如一个简单的 1+1 等于 2 的测试，可以写为 expect(1+1).toBe(2)，这代表了一个成功的测试。</p><p class="css-1ek8oqb">对于上面图片中的测试，都是在测不同情况下，组件的渲染。</p><p class="css-1ek8oqb">对于组件的渲染，常用到的测试的方法有：</p><p class="css-1ek8oqb">.exists(selector)判断是否存在
.find(selector) 获取 dom 节点
.at(number) 获取指定索引的 dom 节点
.filter(selector) 根据选择器过滤 dom 节点
.filterWhere(fn) 根据函数返回值过滤 dom 节点
.text() 获取 dom 节点的文字内容
.props() 获取 dom 节点的属性。
.hasClass(className) 判断是否包含这个类，返回 true 或者 false
.contains(node) 确定是否包含该节点或者一些节点 ，返回 true 或者 false
常用的 jest 匹配器：</p><p class="css-1ek8oqb">.toBe() 浅比较是否相等
.toEqual() 可以对需要深比较的对象进行匹配
.not 测试相反的用例
.toBeGreaterThan() 大于
.toBeLessThan() 小于
.toMatch() 匹配正则表达式
.toHaveLength(number) 匹配数组、字符串长度</p><p class="css-1ek8oqb">打印节点的 dom 结构可以使用</p><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">wrapper</span><span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token plain">selector</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">debug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div></pre><p class="css-1ek8oqb">更多的 enzyme 的 api 可以参考<a href="https://enzymejs.github.io/enzyme/docs/api/" class="css-1xfcqgg">https://enzymejs.github.io/enzyme/docs/api/</a></p><h4 id="2）测试父组件传递的方法是否被正确调用" class="css-17gfwuz"><a href="#2）测试父组件传递的方法是否被正确调用" aria-label="2）测试父组件传递的方法是否被正确调用" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2）测试父组件传递的方法是否被正确调用</h4><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;当改变输入框输入时，父组件传递的changeName方法被正确的参数值调用&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> changeName </span><span class="token operator">=</span><span class="token plain"> jest</span><span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> wrapper </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Search</span><span class="token plain"> changeName</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token plain">changeName</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  wrapper</span><span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token string">&quot;input.name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">simulate</span><span class="token punctuation">(</span><span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    target</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      value</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;kuzure&quot;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token plain">changeName</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token string">&quot;kuzure&quot;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div></pre><p class="css-1ek8oqb">对于父组件传递的函数方法，需要测试是否被正确的参数调用。</p><p class="css-1ek8oqb">测试函数调用之前，需要将测试的函数进行 Mock，才可以被测试是否被调用。</p><p class="css-1ek8oqb">mock 函数可以捕捉函数的调用情况，设置函数的内部实现和返回值。</p><p class="css-1ek8oqb">Mock 函数的方法主要有</p><p class="css-1ek8oqb">jest.fn() 简单的返回一个 mock 函数，被调用后并不会执行
jest.spyOn() 不仅可以捕获函数的调用情况，被调用后还会执行
jest.mock() 可以 mock 整个模块
测试函数调用的方法有</p><p class="css-1ek8oqb">toHaveBeenCalledWith(params) 被指定的参数调用
toHaveBeenCalled() 被调用
not.toHaveBeenCalled() 没有被调用
toHaveBeenCalledTimes(number) 被调用的次数</p><h3 id="运行单元测试，查看覆盖率" class="css-17gfwuz"><a href="#运行单元测试，查看覆盖率" aria-label="运行单元测试，查看覆盖率" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运行单元测试，查看覆盖率</h3><p class="css-1ek8oqb">在终端输入 npm run jest —coverage，回车即可运行单元测试并查看覆盖率</p><p class="css-1ek8oqb">打开.tmp/coverage/lcov-report/index.html 可以查看具体的测试报告
Statements 代表声明覆盖率，Branches 代表分支覆盖率，Functions 代表函数覆盖率，Lines 代表代码行覆盖率。</p><h3 id="一些踩坑经验" class="css-17gfwuz"><a href="#一些踩坑经验" aria-label="一些踩坑经验" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一些踩坑经验</h3><h4 id="当组件生命周期或交互事件触发了异步请求" class="css-17gfwuz"><a href="#当组件生命周期或交互事件触发了异步请求" aria-label="当组件生命周期或交互事件触发了异步请求" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>当组件生命周期或交互事件触发了异步请求</h4><p class="css-1ek8oqb">jest 不会真正执行异步请求，而是直接跳过异步语句。请将下面的代码粘贴到项目中</p><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports punctuation">{</span><span class="token imports"> act </span><span class="token imports punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;react-dom/test-utils&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token parameter">amount </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token plain">resolve</span><span class="token punctuation">,</span><span class="token plain"> amount</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">actWait</span><span class="token punctuation">(</span><span class="token parameter">amount </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">await</span><span class="token plain"> </span><span class="token function">act</span><span class="token punctuation">(</span><span class="token keyword">async</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">await</span><span class="token plain"> </span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token plain">amount</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">updateWrapper</span><span class="token punctuation">(</span><span class="token parameter">wrapper</span><span class="token parameter punctuation">,</span><span class="token parameter"> amount </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">await</span><span class="token plain"> </span><span class="token function">act</span><span class="token punctuation">(</span><span class="token keyword">async</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">await</span><span class="token plain"> </span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token plain">amount</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    wrapper</span><span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre><p class="css-1ek8oqb">当测试过程触发了异步操作，则需要在触发之后加上</p><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token keyword control-flow">await</span><span class="token plain"> </span><span class="token function">updateWrapper</span><span class="token punctuation">(</span><span class="token plain">wrapper</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-1ek8oqb">如果出现 thrown: undefined 的报错，则可能是测试过程有触发了的异步请求没有mock，或者没有mock返回值。</p><p class="css-1ek8oqb">一个简单的异步请求的mock可以写作：</p><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token plain">api</span><span class="token punctuation">.</span><span class="token property-access">getData</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> jest</span><span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">mockResolvedValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> success</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><h4 id="如何获取到组件的实例" class="css-17gfwuz"><a href="#如何获取到组件的实例" aria-label="如何获取到组件的实例" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>如何获取到组件的实例</h4><p class="css-1ek8oqb">有时候，我们想测试组件中的方法的调用情况是否正确、mock其返回，这时我们就需要获取到组件的实例。</p><p class="css-1ek8oqb">需要注意的是，如果组件采用了hook的方式编写，那么是无法获取到组件的实例的，也就拿不到组件中的方法。</p><p class="css-1ek8oqb">所以，如果我们想要获取组件的实例，必须保证被测组件是class组件。</p><p class="css-1ek8oqb">普通的class组件，获取实例的方法为</p><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token plain">wrapper</span><span class="token punctuation">.</span><span class="token method function property-access">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-1ek8oqb">连接了redux的组件实例获取</p><p class="css-1ek8oqb">redux官方建议，测试连接redux的组件时，单独将组件导出一次，从而避免测试被connect包裹的高阶组件。</p><p class="css-1ek8oqb">被antd的Form包裹的高阶组件</p><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token keyword">let</span><span class="token plain"> form</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> wrapper </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">mountWithIntl</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Component</span><span class="token plain"> wrappedComponentRef</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">node</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">form</span><span class="token operator">=</span><span class="token plain"> node</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-1ek8oqb">form就是组件的实例</p><h4 id="当我们通过实例手动更新了组件的state" class="css-17gfwuz"><a href="#当我们通过实例手动更新了组件的state" aria-label="当我们通过实例手动更新了组件的state" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>当我们通过实例手动更新了组件的state</h4><p class="css-1ek8oqb">如果通过setState()更新了state, 则需要在后面加上</p><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token plain">wrapper</span><span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><p class="css-1ek8oqb">这样state才会更新到组件的dom结构中。</p><h4 id="组件中使用了localstorage存储数据" class="css-17gfwuz"><a href="#组件中使用了localstorage存储数据" aria-label="组件中使用了localstorage存储数据" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>组件中使用了localstorage存储数据</h4><p class="css-1ek8oqb">被测组件中如果使用了store.set、store.get方法，需要使用mock，否则jest会报错</p><p class="css-1ek8oqb">我们可以在beforeEach钩子函数中mock上述方法</p><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> storage </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> username</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;kuzure&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  store</span><span class="token punctuation">.</span><span class="token property-access">get</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> jest</span><span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">mockImplementation</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> storage</span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  store</span><span class="token punctuation">.</span><span class="token property-access">set</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> jest</span><span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token parameter punctuation">,</span><span class="token parameter"> value</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token maybe-class-name">Storage</span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">value</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div></pre><p class="css-1ek8oqb">beforeEach会在每一条测试执行之前执行，当beforeEach写在describe内时，只适用于describe块内的测试。</p><p class="css-1ek8oqb">通过mockImplementation()来mock store的具体实现</p><h4 id="子组件连接了redux" class="css-17gfwuz"><a href="#子组件连接了redux" aria-label="子组件连接了redux" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>子组件连接了redux</h4><p class="css-1ek8oqb">如果子组件连接了redux，则在渲染组件时jest会报错，这时我们需要将子组件整个mock掉</p><p class="css-1ek8oqb">在测试文件上方这么写（必须在describe之外)：</p><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token plain">jest</span><span class="token punctuation">.</span><span class="token method function property-access">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;../../ChildComponent&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 引号中为子组件的相对路径</span></div></pre><h4 id="测试saga" class="css-17gfwuz"><a href="#测试saga" aria-label="测试saga" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>测试saga</h4><p class="css-1ek8oqb">对于saga函数，我们主要测试是否调用了正确的api、是否发送了正确的action。</p><p class="css-1ek8oqb">使用redux-saga-test-plan第三方插件，我们可以在测试文件中这么写:</p><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports punctuation">{</span><span class="token imports"> testSaga </span><span class="token imports punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;redux-saga-test-plan&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports punctuation">{</span><span class="token imports"> fetchData </span><span class="token imports punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;../entity&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;当接口正常返回数据，发送正确的action&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  api</span><span class="token punctuation">.</span><span class="token property-access">get</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> jest</span><span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">mockResolvedValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> data</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token function">testSaga</span><span class="token punctuation">(</span><span class="token plain">fetchData</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token plain">api</span><span class="token punctuation">.</span><span class="token property-access">get</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;api/v1/data&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> data</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token constant">FETCH_DATA</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      value</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">.</span><span class="token method function property-access">isDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div></pre><p class="css-1ek8oqb">.next(params)表示执行到下一步的yield语句，参数表示上一步yield语句的返回值</p><p class="css-1ek8oqb">.call(fn)表示断言函数被调用</p><p class="css-1ek8oqb">.put(action)表示断言发送了指定的action</p><p class="css-1ek8oqb">.isDone() 表示断言saga函数已经结束</p><p class="css-1ek8oqb">更多参考：<a href="https://github.com/jfairbank/redux-saga-test-plan#unit-testing" class="css-1xfcqgg">https://github.com/jfairbank/redux-saga-test-plan#unit-testing</a></p><h4 id="测试reducer" class="css-17gfwuz"><a href="#测试reducer" aria-label="测试reducer" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>测试reducer</h4><p class="css-1ek8oqb">这个部分主要测试是否正确完成计算，输入输出十分明确，非常适合做单元测试</p><pre class="language-js prism-code language-javascript css-1wbk7c2"><div class="token-line"><span class="token function">it</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;panel is pushed to panels state&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> state </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">fromJS</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    panels</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;jest&#x27;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> expected </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    panels</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;jest&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;enzyme&#x27;</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> result </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">dashboard</span><span class="token punctuation">(</span><span class="token plain">state</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function">addPanel</span><span class="token punctuation">(</span><span class="token string">&#x27;enzyme&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token plain">result</span><span class="token punctuation">.</span><span class="token method function property-access">toJS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toEqual</span><span class="token punctuation">(</span><span class="token plain">expected</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span></div></pre></section></article><style data-emotion="css bw3ms">.css-bw3ms{height:500px;position:absolute;top:50px;right:-150px;}@media (max-width: 1366px){.css-bw3ms{left:0;top:8px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;height:40px;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}}</style><div class="css-bw3ms"><style data-emotion="css 1wxwq6a">.css-1wxwq6a{color:gray;margin-bottom:8px;}@media (max-width: 1366px){.css-1wxwq6a{margin-right:8px;line-height:16px;display:inline-block;height:16px;}}</style><div class="css-1wxwq6a"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-biaoqian"></use></svg>标签</div><style data-emotion="css 1hdyz7f">.css-1hdyz7f{line-height:24px;}@media (max-width: 1366px){.css-1hdyz7f{margin-right:8px;line-height:16px;display:inline-block;height:16px;}}</style><style data-emotion="css 2rotlb">.css-2rotlb{color:var(--theme-ui-colors-primary);line-height:24px;}@media (max-width: 1366px){.css-2rotlb{margin-right:8px;line-height:16px;display:inline-block;height:16px;}}</style><a class="css-2rotlb" href="/">全部(<!-- -->8<!-- -->)</a><div class="css-1hdyz7f"><a class="css-1xfcqgg" href="/#前端">前端<!-- -->(<!-- -->3<!-- -->)</a></div><div class="css-1hdyz7f"><a class="css-1xfcqgg" href="/#爬虫">爬虫<!-- -->(<!-- -->1<!-- -->)</a></div><div class="css-1hdyz7f"><a class="css-1xfcqgg" href="/#AST">AST<!-- -->(<!-- -->1<!-- -->)</a></div><div class="css-1hdyz7f"><a class="css-1xfcqgg" href="/#电影">电影<!-- -->(<!-- -->1<!-- -->)</a></div><div class="css-1hdyz7f"><a class="css-1xfcqgg" href="/#单元测试">单元测试<!-- -->(<!-- -->1<!-- -->)</a></div><div class="css-1hdyz7f"><a class="css-1xfcqgg" href="/#关于">关于<!-- -->(<!-- -->1<!-- -->)</a></div></div></main><style data-emotion="css 1i8tjli">.css-1i8tjli{margin-top:32px;padding-top:16px;}</style><footer class="css-1i8tjli"><style data-emotion="css 1mbou4u">.css-1mbou4u{border-color:var(--theme-ui-colors-muted);}</style><hr class="css-1mbou4u"/><div class="css-tcsn83"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-9cxz3b"><div style="max-width:814px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;814&#x27; width=&#x27;814&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/fe79452f2bf834ff9bf8cf2684783a6b/1fe79/avatar.webp 204w,/static/fe79452f2bf834ff9bf8cf2684783a6b/a575b/avatar.webp 407w,/static/fe79452f2bf834ff9bf8cf2684783a6b/695ee/avatar.webp 814w" sizes="(min-width: 814px) 814px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 814px) 814px, 100vw" decoding="async" loading="lazy" data-src="/static/fe79452f2bf834ff9bf8cf2684783a6b/d2713/avatar.jpg" data-srcset="/static/fe79452f2bf834ff9bf8cf2684783a6b/8bfb3/avatar.jpg 204w,/static/fe79452f2bf834ff9bf8cf2684783a6b/a39ba/avatar.jpg 407w,/static/fe79452f2bf834ff9bf8cf2684783a6b/d2713/avatar.jpg 814w" alt="kuzure"/></picture><noscript><picture><source type="image/webp" srcSet="/static/fe79452f2bf834ff9bf8cf2684783a6b/1fe79/avatar.webp 204w,/static/fe79452f2bf834ff9bf8cf2684783a6b/a575b/avatar.webp 407w,/static/fe79452f2bf834ff9bf8cf2684783a6b/695ee/avatar.webp 814w" sizes="(min-width: 814px) 814px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 814px) 814px, 100vw" decoding="async" loading="lazy" src="/static/fe79452f2bf834ff9bf8cf2684783a6b/d2713/avatar.jpg" srcSet="/static/fe79452f2bf834ff9bf8cf2684783a6b/8bfb3/avatar.jpg 204w,/static/fe79452f2bf834ff9bf8cf2684783a6b/a39ba/avatar.jpg 407w,/static/fe79452f2bf834ff9bf8cf2684783a6b/d2713/avatar.jpg 814w" alt="kuzure"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><div class="css-0"><div><div><style data-emotion="css 16whzlj">.css-16whzlj{color:black;font-size:24px;}</style><span class="css-16whzlj">kuzure-耳东山亘</span><a href="https://github.com/kuzurec" class="css-1xfcqgg"><svg class="icon github-icon" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></a></div><div class="css-12fs3jb">东边有座山</div></div></div></div><style data-emotion="css 11r1i3o">.css-11r1i3o{-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:0;}</style><style data-emotion="css f95zwa">.css-f95zwa{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:0;}</style><ul class="css-f95zwa"><li><a rel="prev" class="css-1xfcqgg" href="/about/">← <!-- -->关于这里</a></li><li><a rel="next" class="css-1xfcqgg" href="/are-you-lonesome-tonight/">热带往事 --发生在潮湿初夏的一段关于救赎的往事<!-- --> →</a></li></ul></footer></div></div><div id="reach-skip-nav" data-reach-skip-nav-content=""></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>var head = document.head || document.getElementsByTagName("head")[0];var script = document.createElement("script");script.setAttribute("src", "https://at.alicdn.com/t/font_2633402_q06j6vu6n4.js");script.setAttribute("type", "text/javascript");script.setAttribute("charset", "utf8");script.setAttribute("async", "");head.appendChild(script);</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/unit-test/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-318f69286c26ef0a1952.js"],"app":["/app-6f15860e55dcb5c56d9e.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-650edf50d8f6d8e3896c.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-9fb063143ebc60965c12.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js-3a09ebe4b6be5079ca05.js"],"component---src-pages-intro-js":["/component---src-pages-intro-js-e12bf8b49e89b0fa9e71.js"]};/*]]>*/</script><script src="/polyfill-318f69286c26ef0a1952.js" nomodule=""></script><script src="/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-9fb063143ebc60965c12.js" async=""></script><script src="/799b9e28ec84f08939ab3af68c08e0b6efc8bad3-a64b1b520664c8c5c5c8.js" async=""></script><script src="/594a10c5e594bd3faaa0b3336dcd5755131ca933-d8a505556d1d6460083f.js" async=""></script><script src="/41aca86e-ff3c2ac48cc14a2a06ae.js" async=""></script><script src="/app-6f15860e55dcb5c56d9e.js" async=""></script><script src="/framework-83c4af4e5826768a26d2.js" async=""></script><script src="/webpack-runtime-d9647e5f828b6c867fa4.js" async=""></script></body></html>